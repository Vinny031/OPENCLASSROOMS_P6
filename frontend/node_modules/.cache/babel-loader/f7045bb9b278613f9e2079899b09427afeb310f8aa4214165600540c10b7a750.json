{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{getAuthenticatedUser,getBestRatedBooks}from'./common';// eslint-disable-next-line import/prefer-default-export\nexport function useUser(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),connectedUser=_useState2[0],setConnectedUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),auth=_useState4[0],setAuth=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),userLoading=_useState6[0],setUserLoading=_useState6[1];useEffect(function(){function getUserDetails(){return _getUserDetails.apply(this,arguments);}function _getUserDetails(){_getUserDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$getAuthenticat,authenticated,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAuthenticatedUser();case 2:_yield$getAuthenticat=_context.sent;authenticated=_yield$getAuthenticat.authenticated;user=_yield$getAuthenticat.user;setConnectedUser(user);setAuth(authenticated);setUserLoading(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return _getUserDetails.apply(this,arguments);}getUserDetails();},[]);return{connectedUser:connectedUser,auth:auth,userLoading:userLoading};}export function useBestRatedBooks(){var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),bestRatedBooks=_useState8[0],setBestRatedBooks=_useState8[1];useEffect(function(){function getRatedBooks(){return _getRatedBooks.apply(this,arguments);}function _getRatedBooks(){_getRatedBooks=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var books;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getBestRatedBooks();case 2:books=_context2.sent;setBestRatedBooks(books);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getRatedBooks.apply(this,arguments);}getRatedBooks();},[]);return{bestRatedBooks:bestRatedBooks};}export function useFilePreview(file){var _file$,_fileInput$;var fileInput=(_file$=file[0])!==null&&_file$!==void 0?_file$:[];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),imgSrc=_useState10[0],setImgSrc=_useState10[1];useEffect(function(){var _file$2;if(file&&((_file$2=file[0])===null||_file$2===void 0?void 0:_file$2.length)>0){var newUrl=URL.createObjectURL(file[0][0]);if(newUrl!==imgSrc){setImgSrc(newUrl);}}},[(_fileInput$=fileInput[0])===null||_fileInput$===void 0?void 0:_fileInput$.name]);return[imgSrc,setImgSrc];}","map":{"version":3,"names":["useState","useEffect","getAuthenticatedUser","getBestRatedBooks","useUser","connectedUser","setConnectedUser","auth","setAuth","userLoading","setUserLoading","getUserDetails","authenticated","user","useBestRatedBooks","bestRatedBooks","setBestRatedBooks","getRatedBooks","books","useFilePreview","file","fileInput","imgSrc","setImgSrc","length","newUrl","URL","createObjectURL","name"],"sources":["C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/src/lib/customHooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { getAuthenticatedUser, getBestRatedBooks } from './common';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport function useUser() {\r\n  const [connectedUser, setConnectedUser] = useState(null);\r\n  const [auth, setAuth] = useState(false);\r\n  const [userLoading, setUserLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function getUserDetails() {\r\n      const { authenticated, user } = await getAuthenticatedUser();\r\n      setConnectedUser(user);\r\n      setAuth(authenticated);\r\n      setUserLoading(false);\r\n    }\r\n    getUserDetails();\r\n  }, []);\r\n\r\n  return { connectedUser, auth, userLoading };\r\n}\r\n\r\nexport function useBestRatedBooks() {\r\n  const [bestRatedBooks, setBestRatedBooks] = useState({});\r\n\r\n  useEffect(() => {\r\n    async function getRatedBooks() {\r\n      const books = await getBestRatedBooks();\r\n      setBestRatedBooks(books);\r\n    }\r\n    getRatedBooks();\r\n  }, []);\r\n\r\n  return { bestRatedBooks };\r\n}\r\n\r\nexport function useFilePreview(file) {\r\n  const fileInput = file[0] ?? [];\r\n  const [imgSrc, setImgSrc] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (file && file[0]?.length > 0) {\r\n      const newUrl = URL.createObjectURL(file[0][0]);\r\n\r\n      if (newUrl !== imgSrc) {\r\n        setImgSrc(newUrl);\r\n      }\r\n    }\r\n  }, [fileInput[0]?.name]);\r\n\r\n  return [imgSrc, setImgSrc];\r\n}\r\n"],"mappings":"8aAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,oBAAoB,CAAEC,iBAAiB,KAAQ,UAAU,CAElE;AACA,MAAO,SAASC,QAAO,EAAG,CACxB,cAA0CJ,QAAQ,CAAC,IAAI,CAAC,wCAAjDK,aAAa,eAAEC,gBAAgB,eACtC,eAAwBN,QAAQ,CAAC,KAAK,CAAC,yCAAhCO,IAAI,eAAEC,OAAO,eACpB,eAAsCR,QAAQ,CAAC,IAAI,CAAC,yCAA7CS,WAAW,eAAEC,cAAc,eAElCT,SAAS,CAAC,UAAM,SACCU,eAAc,sJAA7B,wMACwCT,qBAAoB,EAAE,4CAApDU,aAAa,uBAAbA,aAAa,CAAEC,IAAI,uBAAJA,IAAI,CAC3BP,gBAAgB,CAACO,IAAI,CAAC,CACtBL,OAAO,CAACI,aAAa,CAAC,CACtBF,cAAc,CAAC,KAAK,CAAC,CAAC,sDACvB,iDACDC,cAAc,EAAE,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAEN,aAAa,CAAbA,aAAa,CAAEE,IAAI,CAAJA,IAAI,CAAEE,WAAW,CAAXA,WAAY,CAAC,CAC7C,CAEA,MAAO,SAASK,kBAAiB,EAAG,CAClC,eAA4Cd,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAAjDe,cAAc,eAAEC,iBAAiB,eAExCf,SAAS,CAAC,UAAM,SACCgB,cAAa,mJAA5B,2KACsBd,kBAAiB,EAAE,QAAjCe,KAAK,gBACXF,iBAAiB,CAACE,KAAK,CAAC,CAAC,wDAC1B,gDACDD,aAAa,EAAE,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAEF,cAAc,CAAdA,cAAe,CAAC,CAC3B,CAEA,MAAO,SAASI,eAAc,CAACC,IAAI,CAAE,wBACnC,GAAMC,UAAS,SAAGD,IAAI,CAAC,CAAC,CAAC,iCAAI,EAAE,CAC/B,eAA4BpB,QAAQ,CAAC,IAAI,CAAC,0CAAnCsB,MAAM,gBAAEC,SAAS,gBAExBtB,SAAS,CAAC,UAAM,aACd,GAAImB,IAAI,EAAI,UAAAA,IAAI,CAAC,CAAC,CAAC,kCAAP,QAASI,MAAM,EAAG,CAAC,CAAE,CAC/B,GAAMC,OAAM,CAAGC,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAE9C,GAAIK,MAAM,GAAKH,MAAM,CAAE,CACrBC,SAAS,CAACE,MAAM,CAAC,CACnB,CACF,CACF,CAAC,CAAE,cAACJ,SAAS,CAAC,CAAC,CAAC,sCAAZ,YAAcO,IAAI,CAAC,CAAC,CAExB,MAAO,CAACN,MAAM,CAAEC,SAAS,CAAC,CAC5B"},"metadata":{},"sourceType":"module","externalDependencies":[]}