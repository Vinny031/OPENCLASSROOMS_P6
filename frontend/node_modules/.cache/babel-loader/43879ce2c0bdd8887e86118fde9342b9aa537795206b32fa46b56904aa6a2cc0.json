{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import styles from'./UpdateBook.module.css';import BookForm from'../../components/Books/BookForm/BookForm';import BackArrow from'../../components/BackArrow/BackArrow';import{getBook}from'../../lib/common';import{APP_ROUTES}from'../../utils/constants';import{useUser}from'../../lib/customHooks';import bookAdd from'../../images/book_add.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateBook(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),book=_useState2[0],setBook=_useState2[1];var params=useParams();var navigate=useNavigate();var _useUser=useUser(),connectedUser=_useUser.connectedUser,auth=_useUser.auth,userLoading=_useUser.userLoading;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),created=_useState4[0],setCreated=_useState4[1];useEffect(function(){if(!userLoading){if(!connectedUser||!auth){navigate(APP_ROUTES.SIGN_IN);}}},[userLoading]);useEffect(function(){function getItem(){return _getItem.apply(this,arguments);}function _getItem(){_getItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getBook(params.id);case 2:data=_context.sent;if(data){setBook(data);}case 4:case\"end\":return _context.stop();}}},_callee);}));return _getItem.apply(this,arguments);}getItem();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsx(BackArrow,{}),/*#__PURE__*/_jsx(\"div\",{className:styles.Container,children:!created?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Modifier votre livre\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Vous pouvez modifier tous les champs sauf la note donn\\xE9e\"}),/*#__PURE__*/_jsx(BookForm,{book:book,validate:setCreated})]}):/*#__PURE__*/_jsxs(\"div\",{className:styles.Created,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Merci!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"votre livre a bien \\xE9t\\xE9 mis \\xE0 jour\"}),/*#__PURE__*/_jsx(\"img\",{src:bookAdd,alt:\"Livre mis \\xE0 jour\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"button\",children:\"Retour \\xE0 l'accueil\"})]})})]});}export default UpdateBook;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useParams","styles","BookForm","BackArrow","getBook","APP_ROUTES","useUser","bookAdd","UpdateBook","book","setBook","params","navigate","connectedUser","auth","userLoading","created","setCreated","SIGN_IN","getItem","id","data","Container","Created"],"sources":["C:/Users/VINNY/Desktop/P6/OPENCLASSROOMS_P6/frontend/src/pages/updateBook/UpdateBook.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport styles from './UpdateBook.module.css';\r\nimport BookForm from '../../components/Books/BookForm/BookForm';\r\nimport BackArrow from '../../components/BackArrow/BackArrow';\r\nimport { getBook } from '../../lib/common';\r\nimport { APP_ROUTES } from '../../utils/constants';\r\nimport { useUser } from '../../lib/customHooks';\r\nimport bookAdd from '../../images/book_add.jpg';\r\n\r\nfunction UpdateBook() {\r\n  const [book, setBook] = useState(null);\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const { connectedUser, auth, userLoading } = useUser();\r\n  const [created, setCreated] = useState(false);\r\n  useEffect(() => {\r\n    if (!userLoading) {\r\n      if (!connectedUser || !auth) {\r\n        navigate(APP_ROUTES.SIGN_IN);\r\n      }\r\n    }\r\n  }, [userLoading]);\r\n  useEffect(() => {\r\n    async function getItem() {\r\n      const data = await getBook(params.id);\r\n      if (data) {\r\n        setBook(data);\r\n      }\r\n    }\r\n    getItem();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"content-container\">\r\n      <BackArrow />\r\n      <div className={styles.Container}>\r\n        {!created ? (\r\n          <>\r\n            <h1>Modifier votre livre</h1>\r\n            <p>Vous pouvez modifier tous les champs sauf la note donnée</p>\r\n            <BookForm book={book} validate={setCreated} />\r\n          </>\r\n        ) : (\r\n          <div className={styles.Created}>\r\n            <h1>Merci!</h1>\r\n            <p>votre livre a bien été mis à jour</p>\r\n            <img src={bookAdd} alt=\"Livre mis à jour\" />\r\n            <Link to=\"/\" className=\"button\">Retour à l&apos;accueil</Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdateBook;\r\n"],"mappings":"8aAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CAC/D,MAAOC,OAAM,KAAM,yBAAyB,CAC5C,MAAOC,SAAQ,KAAM,0CAA0C,CAC/D,MAAOC,UAAS,KAAM,sCAAsC,CAC5D,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,OAASC,UAAU,KAAQ,uBAAuB,CAClD,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,MAAOC,QAAO,KAAM,2BAA2B,CAAC,6IAEhD,QAASC,WAAU,EAAG,CACpB,cAAwBX,QAAQ,CAAC,IAAI,CAAC,wCAA/BY,IAAI,eAAEC,OAAO,eACpB,GAAMC,OAAM,CAAGX,SAAS,EAAE,CAC1B,GAAMY,SAAQ,CAAGb,WAAW,EAAE,CAC9B,aAA6CO,OAAO,EAAE,CAA9CO,aAAa,UAAbA,aAAa,CAAEC,IAAI,UAAJA,IAAI,CAAEC,WAAW,UAAXA,WAAW,CACxC,eAA8BlB,QAAQ,CAAC,KAAK,CAAC,yCAAtCmB,OAAO,eAAEC,UAAU,eAC1BrB,SAAS,CAAC,UAAM,CACd,GAAI,CAACmB,WAAW,CAAE,CAChB,GAAI,CAACF,aAAa,EAAI,CAACC,IAAI,CAAE,CAC3BF,QAAQ,CAACP,UAAU,CAACa,OAAO,CAAC,CAC9B,CACF,CACF,CAAC,CAAE,CAACH,WAAW,CAAC,CAAC,CACjBnB,SAAS,CAAC,UAAM,SACCuB,QAAO,iIAAtB,oKACqBf,QAAO,CAACO,MAAM,CAACS,EAAE,CAAC,QAA/BC,IAAI,eACV,GAAIA,IAAI,CAAE,CACRX,OAAO,CAACW,IAAI,CAAC,CACf,CAAC,sDACF,0CACDF,OAAO,EAAE,CACX,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,aAAK,SAAS,CAAC,mBAAmB,wBAChC,KAAC,SAAS,IAAG,cACb,YAAK,SAAS,CAAElB,MAAM,CAACqB,SAAU,UAC9B,CAACN,OAAO,cACP,wCACE,4CAA6B,cAC7B,kFAA+D,cAC/D,KAAC,QAAQ,EAAC,IAAI,CAAEP,IAAK,CAAC,QAAQ,CAAEQ,UAAW,EAAG,GAC7C,cAEH,aAAK,SAAS,CAAEhB,MAAM,CAACsB,OAAQ,wBAC7B,8BAAe,cACf,iEAAwC,cACxC,YAAK,GAAG,CAAEhB,OAAQ,CAAC,GAAG,CAAC,qBAAkB,EAAG,cAC5C,KAAC,IAAI,EAAC,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,QAAQ,mCAA+B,GAEjE,EACG,GACF,CAEV,CAEA,cAAeC,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}